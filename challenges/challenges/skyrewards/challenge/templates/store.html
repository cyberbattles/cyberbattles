{% extends 'base.html' %}

{% block content %}
<div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-slate-800">Redeem Rewards</h1>
    <div class="text-right">
        <p class="text-sm text-slate-500">Your Balance</p>
        <p class="text-xl font-bold text-blue-600">{{ "{:,}".format(user.points) }} pts</p>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    {% for product in products %}
    <div class="bg-white rounded-lg shadow hover:shadow-lg transition flex flex-col overflow-hidden border border-slate-200 {% if product.is_flag %} ring-2 ring-yellow-400 {% endif %}">
        <div class="h-32 {% if product.is_flag %}bg-yellow-100{% else %}bg-blue-50{% endif %} flex items-center justify-center">
            <span class="text-4xl">
                {% if product.is_flag %}üèÜ{% else %}‚úàÔ∏è{% endif %}
            </span>
        </div>
        <div class="p-6 flex flex-col flex-grow">
            <h3 class="text-lg font-bold text-slate-800 mb-1">{{ product.name }}</h3>
            <p class="text-slate-600 text-sm mb-4 flex-grow">{{ product.description }}</p>
            <div class="flex justify-between items-center mt-4 pt-4 border-t border-slate-100">
                <span class="font-bold text-blue-900">{{ "{:,}".format(product.price) }} pts</span>
                
                <form action="{{ url_for('buy', product_id=product.id) }}" method="POST">
                    <button type="submit" class="text-xs uppercase tracking-wider font-bold py-2 px-4 rounded 
                    {% if user.points >= product.price %}
                        bg-blue-600 text-white hover:bg-blue-700
                    {% else %}
                        bg-slate-200 text-slate-400 cursor-not-allowed
                    {% endif %}"
                    {% if user.points < product.price %}disabled{% endif %}>
                        Redeem
                    </button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}